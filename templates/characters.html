{% extends 'base.html' %}
{% block content %}
    
        <h2>Current List of Women Characters</h2>
    <!-- Search functionallity -->
        
            <div class="row card">
                <form action="{{ url_for('search') }}" method="POST" class="col-10">
                    <div class="row">
                        <div class="input-field col-10">
                            <i class="fas fa-search"></i>
                            <input type="text" name="query" id="query" minlength="3" required>
                            <label for="query">Search Female Characters</label>
                        </div>
                        <div class="col-10">
                            <a href="{{ url_for('characters') }}" class="btn red">Reset</a>
                            <button type="submit" class="btn">
                                <i class="fas fa-search left"></i>Search
                            </button>
                        </div>
                    </div>
                    <!-- Filter functionallity by category-->
                    <div class="col-10">
                        <h4>Filter by Category</h4>
                    </div>
                    <div class="input-field col-10">
                        <select id="category_options" name="category_name" multiple>
                            <option value="" selected disabled>Select</option>
                            {% for category in categories %}
                                <option value="{{category._id}}">category.category_name</option>
                            {% endfor %}
                        </select>
                    </div>

                </form>
            </div>
        <!--Characters gallery -->
       <div class="row">
           <div class="row col-10">
                {% for character in characters %}
                    <div class="card col-md-3">
                        
                            <h3>{{ character.woman_name }}</h3>
                            <img src="{{ character.image }}" alt="{{ character.woman_name }}">
                            <h5>Category</h5><p class="">{{ character.category_name }}</p>
                            <h5>Skilled Area</h5><p class="">{{ character.area_name }}</p>
                            <p class="fulltext">
                                <h5>Year of Birth</h5><p class="">{{ character.year }}</p>
                                <h5>Country</h5><p class="">{{ character.country_name }}</p>
                                <h5>Quote</h5><p class="">'{{ character.quote }}'</p>
                                <h5>Story</h5><p class="">{{ character.story }}</p>
                                <p class=""><a href="{{ character.more_link }}" target="_blank" title="Know more">More Info</a></p>
                                <p class=""><em>Added by: {{ character.username }}</em></p>
                            </p>
                            <p class="linktext">See full details</p>
                        
                            
                        <!-- If the session user is = to the character's username variable, both in lowecase for comparison, then the buttons will be shown-->
                        {% if session.user | lower == character.username | lower %}
                            <a href="{{ url_for('edit_character', character_id=character._id) }}" class="btn-default">Edit</a>
                            <a href="{{ url_for('delete_character', character_id=character._id) }}" class="btn-default">Delete</a>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div> 
        
    <!-- if no characters where found in the search -->
         if characters|length < 0 
            <h3 class="red-text">No results found </h3>
         endif 
        
{% endblock %}
   
    