{% extends 'base.html' %}
{% block content %}
    
    <div class="container">
        <h2>Current List of Women Characters</h2>
    <!-- Search functionallity -->
        <div class="row card">
            <form action="{{ url_for('search') }}" method="POST" class="col-12">
                <div class="row">
                    <div class="input-field col-12 m8">
                        <i class="fas fa-search"></i>
                        <input type="text" name="query" id="query" minlength="3" required>
                        <label for="query">Search Female Characters</label>
                    </div>
                    <div class="col-12 m4">
                        <a href="{{ url_for('characters') }}" class="btn red">Reset</a>
                        <button type="submit" class="btn">
                            <i class="fas fa-search left"></i>Search
                        </button>
                    </div>
                </div>
                <!-- Filter functionallity by category-->
                <div class="col-12">
                    <h4>Filter by Category</h4>
                </div>
                <div class="input-field col-12">
                    <select id="category_options" name="category_name" multiple>
                        <option value="" selected disabled>Select</option>
                        {% for category in categories %}
                            <option value="{{category._id}}">category.category_name</option>
                        {% endfor %}
					</select>
                </div>

            </form>
        </div>
    <!--Characters gallery -->
        
        <div class="row justify-content-center">
            
            <div class="col-lg-10">
                {% for character in characters %}
                <div class="row">
                    <div class="col-lg-10">
                        <a href="#" data-toggle="lightbox" data-gallery="gallery" 
                            data-title="<p>{{ character.woman_name }}</p>" class="col-md-4 modal-content" data-footer="
                                <div class='row modal-dialog-scrollable'>
                                    <div class='col-12'>
                                        <h5 class='modal-title'>{{ character.woman_name }}</h5>
                                        <p><img src='{{ character.image }}' alt='{{ character.woman_name }}' width='50%' height='50%'></p>
                                        <h5>Category</h5> <p>{{ character.category_name }}</p>
                                        <h5>Year of Birth</h5> <p>{{ character.year }}</p>
                                        <h5>Country</h5> <p>{{ character.country_name }}</p>
                                        <h5>Skilled Area</h5> <p>{{ character.area_name }}</p>
                                        <h5>Quote</h5> <p>'{{ character.quote }}'</p>
                                        <h5>Story</h5> <p>{{ character.story }}</p>
                                        <p><a href='{{ character.more_link }}' target='_blank' title='Know more'>More Info</a></p>
                                        <p><em>Added by: {{ character.username }}</em></p>
                                    </div>
                                
                                </div>">
                        
                            <div class="row">
                                <img src="{{ character.image }}" width="100%" height="100%" class="rounded col-12 col-md-6">
                                
                            </div>
                            
                        </a>
        
                    </div>
                                        

                </div>
                <!-- If the session user is = to the character's username variable, both in lowecase for comparison, then the buttons will be shown-->
                {% if session.user | lower == character.username | lower %}
                    <a href="{{ url_for('edit_character', character_id=character._id) }}" class="btn-default">Edit</a>
                    <a href="{{ url_for('delete_character', character_id=character._id) }}" class="btn-default">Delete</a>
                {% endif %}
            {% endfor %}
        
            </div>
        </div>

    </div>
    <!-- if no characters where found in the search -->
        {% if characters|length < 0 %}
            <h3 class="red-text">No results found </h3>
        {% endif %}
        
{% endblock %}
   
    